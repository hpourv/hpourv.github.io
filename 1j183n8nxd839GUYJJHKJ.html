<!DOCTYPE html>
<html>
<head>
    <title>Adjustable Gaussian Noise</title>
</head>
<body>
    <h1>Adjustable Gaussian Noise</h1>
    <input type="file" id="imageInput">
    <br>
    <label for="noiseSlider">Noise Intensity:</label>
    <input type="range" id="noiseSlider" min="0" max="100" value="0">
    <br>
    <canvas id="outputCanvas"></canvas>

    <script>
        let currentNoiseLevel = 0;

        // Function to add Gaussian noise to an image
        function addGaussianNoise(imageData, amount) {
            const data = imageData.data;
            const length = data.length;
            const standardDeviation = amount;

            for (let i = 0; i < length; i += 4) {
                const noise = standardDeviation * Math.random();

                data[i] += noise;     // Red channel
                data[i + 1] += noise; // Green channel
                data[i + 2] += noise; // Blue channel
            }

            return imageData;
        }

        // Function to handle image and slider changes
        function handleChanges() {
            const imageInput = document.getElementById("imageInput");
            const outputCanvas = document.getElementById("outputCanvas");
            const noiseSlider = document.getElementById("noiseSlider");
            const context = outputCanvas.getContext("2d");

            const img = new Image();
            img.src = URL.createObjectURL(imageInput.files[0]);

            img.onload = function() {
                outputCanvas.width = img.width;
                outputCanvas.height = img.height;

                context.drawImage(img, 0, 0);
                const imageData = context.getImageData(0, 0, img.width, img.height);

                noiseSlider.addEventListener("input", function() {
                    const noiseLevel = parseInt(noiseSlider.value);
                    const noiseChange = noiseLevel - currentNoiseLevel;
                    const noisyImageData = addGaussianNoise(imageData, noiseChange);
                    currentNoiseLevel = noiseLevel;
                    context.putImageData(noisyImageData, 0, 0);
                });
            };
        }

        // Call the function initially and whenever image input changes
        document.getElementById("imageInput").addEventListener("change", handleChanges);
        handleChanges(); // Call it initially to set up the canvas
    </script>
</body>
</html>
