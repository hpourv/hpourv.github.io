// ... (Existing code)

// Function to handle image and noise input changes
function handleChanges() {
    const imageInput = document.getElementById("imageInput");
    const outputCanvas = document.getElementById("outputCanvas");
    const noiseInput = document.getElementById("noiseInput");
    const context = outputCanvas.getContext("2d");

    const img = new Image();
    img.src = URL.createObjectURL(imageInput.files[0]);

    img.onload = function() {
        outputCanvas.width = img.width;
        outputCanvas.height = img.height;

        context.drawImage(img, 0, 0);
        originalImageData = context.getImageData(0, 0, img.width, img.height);

        noiseInput.addEventListener("change", function() {
            const noiseLevel = parseInt(noiseInput.value);
            if (noiseLevel >= 1 && noiseLevel <= 10) {
                const noiseChange = noiseLevel - currentNoiseLevel;
                const noisyImageData = addGaussianNoise(originalImageData, noiseChange);
                currentNoiseLevel = noiseLevel;
                context.putImageData(noisyImageData, 0, 0);
            } else {
                alert("Please enter a noise intensity between 1 and 10.");
            }
        });
    };
}

// Call the function initially and whenever image input changes
document.getElementById("imageInput").addEventListener("change", handleChanges);
handleChanges(); // Call it initially to set up the canvas
